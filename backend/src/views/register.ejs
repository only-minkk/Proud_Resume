<!-- <!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register - Proud Resumes</title>
    <link rel="stylesheet" href="/styles/main.css" />
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const form = document.querySelector("form");
        form.addEventListener("submit", function (event) {
          const password = document.getElementById("password").value;
          const confirmPassword =
            document.getElementById("confirmPassword").value;
          if (password !== confirmPassword) {
            event.preventDefault(); // 폼 제출 중단
            alert("비밀번호를 다시 확인하여 주십시오.");
          }
        });
      });
    </script>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>PR | Proud Resumes</h1>
        <nav>
          <ul>
            <li><a href="/">Home</a></li>
          </ul>
        </nav>
      </header>
      <main>
        <section id="register">
          <form action="/auth/register" method="POST">
            <label for="name">Name</label>
            <input type="text" id="name" name="name" required />

            <label for="email">Email</label>
            <input type="email" id="email" name="email" required />

            <label for="password">Password</label>
            <input type="password" id="password" name="password" required />

            <label for="confirmPassword">Confirm Password</label>
            <input
              type="password"
              id="confirmPassword"
              name="confirmPassword"
              required
            />

            <button type="submit">Register</button>
          </form>
        </section>
      </main>
    </div>
  </body>
</html> -->

<!-- <!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register - Proud Resumes</title>
    <link rel="stylesheet" href="/styles/main.css" />
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const form = document.querySelector("form");
        form.addEventListener("submit", async function (event) {
          event.preventDefault(); // 폼 기본 제출 행위 중단

          const password = document.getElementById("password").value;
          const confirmPassword =
            document.getElementById("confirmPassword").value;
          if (password !== confirmPassword) {
            alert("비밀번호를 다시 확인하여 주십시오.");
            return;
          }

          // 폼 데이터를 가져와서 FormData 객체 생성
          const formData = {
            name: document.getElementById("name").value,
            email: document.getElementById("email").value,
            password: document.getElementById("password").value,
            confirmPassword: document.getElementById("confirmPassword").value,
          };

          // FormData 객체를 이용하여 fetch API로 POST 요청 전송
          try {
            const response = await fetch(form.action, {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(formData),
            });
            const result = await response.json();

            // 서버로부터 응답이 성공적인지 확인
            if (!result.success) {
              throw new Error(result.message);
            }

            alert("회원가입 성공!");
            window.location.href = "/"; // 성공 시 홈페이지로 리다이렉트
          } catch (error) {
            alert(`Error: ${error.message}`); // 에러 메시지 표시
          }
        });
      });
    </script>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>PR | Proud Resumes</h1>
        <nav>
          <ul>
            <li><a href="/">Home</a></li>
          </ul>
        </nav>
      </header>
      <main>
        <section id="register">
          <form action="/auth/register" method="POST">
            <label for="name">Name</label>
            <input type="text" id="name" name="name" required />

            <label for="email">Email</label>
            <input type="email" id="email" name="email" required />

            <label for="password">Password</label>
            <input type="password" id="password" name="password" required />

            <label for="confirmPassword">Confirm Password</label>
            <input
              type="password"
              id="confirmPassword"
              name="confirmPassword"
              required
            />

            <button type="submit">Register</button>
          </form>
        </section>
      </main>
    </div>
  </body>
</html> -->

<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register - Proud Resumes</title>
    <link rel="stylesheet" href="/styles/main.css" />
    <script src="../components/activity-timeout-logout.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const form = document.querySelector("form");
        form.addEventListener("submit", async function (event) {
          event.preventDefault(); // 폼 기본 제출 행위 중단

          const password = document.getElementById("password").value;
          const confirmPassword =
            document.getElementById("confirmPassword").value;
          if (password !== confirmPassword) {
            alert("비밀번호를 다시 확인하여 주십시오.");
            return;
          }

          // 폼 데이터를 가져와서 FormData 객체 생성
          const formData = new FormData(form);

          const formDataObject = {};
          //   formData.forEach((value, key) => {
          //     formDataObject[key] = value;
          //   });
          for (const [key, value] of formData.entries()) {
            formDataObject[key] = value;
          }

          // FormData 객체를 이용하여 fetch API로 POST 요청 전송
          try {
            const response = await fetch("/auth/register", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(formDataObject),
              //   body: JSON.stringify(formData),
            });
            const result = await response.json();

            // 서버로부터 응답이 성공적인지 확인
            if (!result.success) {
              throw new Error(result.message);
            }

            alert("회원가입 성공!");
            window.location.href = "/"; // 성공 시 홈페이지로 리다이렉트
          } catch (error) {
            alert(`Error: ${error.message}`); // 에러 메시지 표시
          }
        });
      });
    </script>
    <header>
      <h1>PR | Proud Resumes</h1>
      <nav>
        <ul>
          <li><a href="/">Home</a></li>
        </ul>
      </nav>
    </header>
  </head>
  <body>
    <div class="container">
      <main>
        <section id="register">
          <form>
            <label for="name">Name</label>
            <input type="text" id="name" name="name" required />

            <label for="email">Email</label>
            <input type="email" id="email" name="email" required />

            <label for="password">Password</label>
            <input type="password" id="password" name="password" required />

            <label for="confirmPassword">Confirm Password</label>
            <input
              type="password"
              id="confirmPassword"
              name="confirmPassword"
              required
            />

            <button type="submit">Register</button>
          </form>
        </section>
      </main>
    </div>
  </body>
</html>
